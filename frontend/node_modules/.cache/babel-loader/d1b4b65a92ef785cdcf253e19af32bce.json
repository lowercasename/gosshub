{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from 'react-dom';\nimport store from './logic/store';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport { Provider } from 'react-redux';\nimport { Link, Route, useLocation } from \"wouter\";\nimport Login from './login';\nimport Home from './home';\nimport { apiCall } from './util';\n\nvar App = function App() {\n  var _useLocation = useLocation(),\n      _useLocation2 = _slicedToArray(_useLocation, 2),\n      location = _useLocation2[0],\n      setLocation = _useLocation2[1];\n\n  var jwt = useSelector(function (state) {\n    return state.jwt;\n  });\n  var loggedIn = useSelector(function (state) {\n    return state.loggedIn;\n  });\n  var dispatch = useDispatch();\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var loggedIn;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return apiCall('/user', true);\n\n          case 2:\n            loggedIn = _context.sent;\n            console.log(loggedIn);\n\n            if (loggedIn) {\n              dispatch({\n                type: 'auth/login'\n              });\n              setLocation('/home');\n            } else {\n              dispatch({\n                type: 'auth/logout'\n              });\n            }\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"app\"\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    id: \"app__header\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, \"GossHub\"), !loggedIn && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    href: \"/login\"\n  }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n    href: \"/register\"\n  }, \"Register\"))), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\"\n  }, /*#__PURE__*/React.createElement(Login, null)), /*#__PURE__*/React.createElement(Route, {\n    path: \"/register\"\n  }, \"Register!\"), /*#__PURE__*/React.createElement(Route, {\n    path: \"/home\"\n  }, /*#__PURE__*/React.createElement(Home, null)));\n};\n\nvar domContainer = document.querySelector('#app');\nReactDOM.render( /*#__PURE__*/React.createElement(Provider, {\n  store: store\n}, /*#__PURE__*/React.createElement(App, null)), domContainer);","map":null,"metadata":{},"sourceType":"module"}