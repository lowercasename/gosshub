{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport { useLocation, Link } from \"wouter\";\nimport { Tooltip } from 'react-tippy';\nimport { apiCall } from '../util';\n\nvar Document = function Document(_ref) {\n  var document = _ref.document,\n      full = _ref.full,\n      edit = _ref.edit;\n\n  var _useLocation = useLocation(),\n      _useLocation2 = _slicedToArray(_useLocation, 2),\n      location = _useLocation2[0],\n      setLocation = _useLocation2[1];\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      transformation = _useState2[0],\n      setTransformation = _useState2[1];\n\n  var formatDate = function formatDate(date) {\n    return new Date(date).toLocaleDateString();\n  };\n\n  var navigateTransformations = function navigateTransformations(step) {\n    if (document.transformations[transformation + step]) {\n      setTransformation(transformation + step);\n    }\n  };\n\n  var tippyProps = {\n    position: \"bottom\",\n    arrow: true,\n    animation: \"fade\",\n    theme: \"light\",\n    distance: 17,\n    size: \"small\",\n    delay: 350,\n    hideDelay: 0\n  };\n  console.log(location);\n\n  var restoreDocument = function restoreDocument() {\n    apiCall(\"/document?uuid=\".concat(document.uuid), true, 'put', {\n      body: document.transformations[transformation].body\n    }).then(function () {\n      console.log('Yay');\n      setLocation(location);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"article\", {\n    className: \"document\"\n  }, transformation != 0 && /*#__PURE__*/React.createElement(\"header\", {\n    className: \"document__header document__header--previous-version\"\n  }, /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-clock-rotate-left\"\n  }), \" Viewing a previous version of this document.\")), /*#__PURE__*/React.createElement(\"main\", null, document.transformations[transformation].body), /*#__PURE__*/React.createElement(\"footer\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"document__meta\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-user-circle\"\n  }), \" \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/user/\".concat(document.transformations[transformation].username)\n  }, document.transformations[transformation].username), \" on \", formatDate(document.transformations[transformation].date)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"document__controls\"\n  }, document.transformations[transformation + 1] && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    title: \"Older version\"\n  }, tippyProps), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"document__button\",\n    onClick: function onClick() {\n      return navigateTransformations(1);\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-chevron-left\"\n  }))), document.transformations[transformation - 1] && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    title: \"Newer version\"\n  }, tippyProps), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"document__button\",\n    onClick: function onClick() {\n      return navigateTransformations(-1);\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-chevron-right\"\n  }))), transformation !== 0 && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    title: \"Restore this version\"\n  }, tippyProps), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"document__button\",\n    onClick: restoreDocument\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-angles-up\"\n  }))), transformation === 0 && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    title: \"Edit document\"\n  }, tippyProps), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"document__button\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-pencil\"\n  }))), !full && /*#__PURE__*/React.createElement(Tooltip, _extends({\n    title: \"View document\"\n  }, tippyProps), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"document__button\",\n    onClick: function onClick() {\n      return setLocation(\"/document/\".concat(document.uuid));\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-eye\"\n  }))))));\n};\n\nexport default Document;","map":null,"metadata":{},"sourceType":"module"}