{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from 'react-dom';\nimport store from './logic/store';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Provider } from 'react-redux';\nimport { Link, Route } from \"wouter\";\nimport ProtectedRoute from './ProtectedRoute';\nimport UnauthedRoute from './UnauthedRoute';\nimport Login from './login';\nimport Home from './home';\nimport { apiCall } from './util';\nimport './scss/style.scss';\n\nvar App = function App() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var loggedIn = useSelector(function (state) {\n    return state.loggedIn;\n  });\n  var dispatch = useDispatch(); // Check if we're currently authenticated by making a dummy call to /user\n\n  useEffect(function () {\n    apiCall('/user', true).then(function () {\n      return dispatch({\n        type: 'auth/login'\n      }), setLoading(false);\n    })[\"catch\"](function () {\n      return dispatch({\n        type: 'auth/logout'\n      }), setLoading(false);\n    });\n  }, []);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"app\"\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      id: \"app__header\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\"\n    }, \"GossHub\"))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"app\"\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      id: \"app__header\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\"\n    }, \"GossHub\")), !loading && !loggedIn && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n      href: \"/login\"\n    }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n      href: \"/register\"\n    }, \"Register\"))), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\"\n    }, /*#__PURE__*/React.createElement(Home, null)), /*#__PURE__*/React.createElement(UnauthedRoute, {\n      path: \"/login\"\n    }, /*#__PURE__*/React.createElement(Login, null)), /*#__PURE__*/React.createElement(UnauthedRoute, {\n      path: \"/register\"\n    }, \"Register!\"), \"// \", /*#__PURE__*/React.createElement(ProtectedRoute, {\n      path: \"/home\"\n    }, /*#__PURE__*/React.createElement(Home, null)));\n  }\n};\n\nvar domContainer = document.querySelector('#app');\nReactDOM.render( /*#__PURE__*/React.createElement(Provider, {\n  store: store\n}, /*#__PURE__*/React.createElement(App, null)), domContainer);","map":null,"metadata":{},"sourceType":"module"}